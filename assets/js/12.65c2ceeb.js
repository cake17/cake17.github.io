(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{192:function(e,t,s){"use strict";s.r(t);var n=s(0),i=Object(n.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("p",[e._v("Ayant eu l'habitude d'utiliser MAMP, je n'ai jamais trop prêté attention à l'installation de PHP et de ses extensions.")]),e._v(" "),s("p",[e._v("Or je tente d'apprendre docker et lorsque je créé des dockerfile qui installent php, je ne sais pas quelles extensions sont nécessaires, lesquelles sont dépréciées, etc...")]),e._v(" "),s("p",[e._v("Je voudrais donc faire un petit résumé des extensions PHP, et plus précisément pour PHP 5.6.")]),e._v(" "),e._m(0),e._v(" "),s("p",[e._v("Les extensions pour PHP se trouvent "),s("a",{attrs:{href:"https://pecl.php.net/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ici"),s("OutboundLink")],1),e._v(" ou encore sur la "),s("a",{attrs:{href:"https://php.net/manual/fr/extensions.alphabetical.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("doc PHP"),s("OutboundLink")],1),e._v(" mais j'ai un peu de mal à me repérer sur ces 2 sites.")]),e._v(" "),s("p",[e._v("De même, les extensions obsolètes ou à ne pas utiliser de la "),s("a",{attrs:{href:"https://php.net/manual/fr/extensions.state.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("doc PHP"),s("OutboundLink")],1),e._v(" n'ont pas l'air d'être à jour.")]),e._v(" "),e._m(1),e._v(" "),s("p",[e._v("Rien ne vaut un test dans le réél. J'ai lancé un container avec docker qui contient la dernière version de Debian, appelée Jessie:")]),e._v(" "),e._m(2),s("p",[e._v("Je suis donc dans le bash de ma version containerisée de Jessie et je vais pouvoir tester des installations de php5.")]),e._v(" "),s("p",[e._v("Je commence par installer php5-fpm qui semble être la version la plus avancée de php. On peut lire un résumé des avantages/inconvénients sur "),s("a",{attrs:{href:"http://php.net/manual/fr/install.fpm.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("cette page"),s("OutboundLink")],1),e._v(":")]),e._v(" "),e._m(3),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),s("p",[e._v("Voici la "),s("a",{attrs:{href:"https://php.net/manual/fr/extensions.alphabetical.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("liste complète des extensions"),s("OutboundLink")],1),e._v(" et une "),s("a",{attrs:{href:"https://pagodabox.io/docs/php_extensions?c=5-6&",target:"_blank",rel:"noopener noreferrer"}},[e._v("liste plus restrictive"),s("OutboundLink")],1),e._v(" qui me semble meilleure car certains modules anciens ont été purgés. Les modules qui ont été installés sur ma machine avec sont en gras:")]),e._v(" "),s("p",[e._v("Autre info: Le module mcrypt n'est plus maintenu, il est donc préferable de ne pas l'installer.")]),e._v(" "),e._m(7),e._v(" "),s("p",[e._v("2 autres commandes me semblent intéressentes pour regarder la configuration de PHP:")]),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),s("p",[e._v("La configuration de php ne doit jamais se faire dans les php.ini. En effet, si l'on met à jour php et que le php.ini a changé, l'installation va écraser le php.ini que vous aviez configuré. La bonne façon est:")]),e._v(" "),s("ul",[s("li",[e._v("de faire une configuration par dossier avec les "),s("a",{attrs:{href:"https://php.net/manual/fr/configuration.file.per-user.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("fichiers .user.ini"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("li",[e._v("d'utiliser les php_value dans les fichiers de configuration de php-fpm : pool.conf")])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"ou-trouver-les-extensions-php"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ou-trouver-les-extensions-php","aria-hidden":"true"}},[this._v("#")]),this._v(" Où trouver les extensions PHP ?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"quelles-extensions-sont-installees-par-defaut-avec-php-fpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#quelles-extensions-sont-installees-par-defaut-avec-php-fpm","aria-hidden":"true"}},[this._v("#")]),this._v(" Quelles extensions sont installées par défaut avec php-fpm ?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("docker run -t -i debian:jessie /bin/bash\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("apt-get")]),this._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v(" php5-fpm\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("J'insiste sur le fait qu'il faille utiliser php-fpm et de "),t("strong",[this._v("ne")]),this._v(" surtout "),t("strong",[this._v("plus")]),this._v(" utiliser mod_php.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Dans mon terminal, je vais pouvoir trouver les modules qui sont installés avec la commande "),t("code",[this._v("php -m")]),this._v(". En effet l'installation de php5-fpm va installer les extensions PHP dépendantes dont il a besoin pour fonctionner.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"liste-complete-des-modules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#liste-complete-des-modules","aria-hidden":"true"}},[this._v("#")]),this._v(" Liste complète des modules")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"configuration-de-php-et-des-extensions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration-de-php-et-des-extensions","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration de PHP et des extensions")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("php -i : correspond au phpinfo() dans le navigateur\nLes extensions et leurs configurations sont affichées")]),this._v(" "),t("li",[this._v("php --ini : infos sur les fichiers de configuration (=initialisation) utilisés\nConfiguration File (php.ini) Path: /etc/php5/cli\nLoaded Configuration File: /etc/php5/cli/php.ini\nScan for additional .ini files in: /etc/php5/cli/conf.d\nAdditional .ini files parsed:      /etc/php5/cli/conf.d/05-opcache.ini,\n/etc/php5/cli/conf.d/10-pdo.ini,\n/etc/php5/cli/conf.d/20-json.ini,\n/etc/php5/cli/conf.d/20-readline.ini")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("On se rend compte que selon le contexte (fpm, la console=cli, etc..), l'initialisation des modules n'est pas faite par le même fichier.\nPour le navigateur, le fichier se trouve dans "),t("code",[this._v("/etc/php5/fpm/php.ini")]),this._v(".\nPour la console, le fichier se trouve dans "),t("code",[this._v("/etc/php5/cli")]),this._v(".")])}],!1,null,null,null);t.default=i.exports}}]);